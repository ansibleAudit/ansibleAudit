---
# Copyright (c) 2024 Marc Serrano
#
# This file is part of the terms of the GNU General Public License (GPL).
# See https://www.gnu.org/licenses/gpl-3.0.html for more details.

- name: Check pending updates
  command: "{{ check_updates_command }}"
  register: output
       
- name: Fail if updates are available
  ansible.builtin.fail:
     msg: "There are pending updates available. [Remediation] {{ remediation }}"
  when: output.rc == 0 and output.stdout_lines | length > 1
